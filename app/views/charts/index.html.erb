<h1>Poll: <%= @poll.title %></h1>
<canvas id="myChart" width="400" height="400"></canvas>
<% content_for :charts do %>
<script>

$(function() {
  var ctx = $("#myChart");
  var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
        labels: <%= raw @questions.map {|q| q.content} %>,
        datasets: [{
            label: 'Number of Votes',
            data: <%= raw @questions.map {|q| q.votes.count} %>,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)'
            ],
            borderColor: [
                'rgba(255,99,132,1)'
            ],
            borderWidth: 1
        }]
    }
  });
});
</script>
<% end %>
